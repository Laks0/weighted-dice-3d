[gd_scene load_steps=8 format=3 uid="uid://cpk2ybry8qadp"]

[ext_resource type="Script" uid="uid://cdygpnjyges8x" path="res://Classes/Die/DieBehaviour/Jumps/JumpsDieBehaviour.gd" id="2_13t55"]
[ext_resource type="Script" uid="uid://k1sewwy5o5xr" path="res://Classes/Die/DieBehaviour/Jumps/Preparation.gd" id="3_ep4f8"]
[ext_resource type="Script" uid="uid://50pohyi3dtns" path="res://Classes/Die/DieBehaviour/Jumps/Targeting.gd" id="4_sb34c"]
[ext_resource type="PackedScene" uid="uid://crm0xhehm45a2" path="res://Classes/LinePointer/LinePointer.tscn" id="5_a2c7f"]
[ext_resource type="Script" uid="uid://b0o5dd4c7ifrd" path="res://Classes/Die/DieBehaviour/Jumps/Shoot.gd" id="5_sb34c"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_sb34c"]

[sub_resource type="TorusMesh" id="TorusMesh_sb34c"]
material = SubResource("StandardMaterial3D_sb34c")
inner_radius = 0.197
outer_radius = 0.278

[node name="JumpsDieBehaviour" type="Node3D"]
script = ExtResource("2_13t55")
maxAttacks = 5
metadata/_custom_type_script = "uid://pisn2tkx8kfu"

[node name="Preparation" type="Node3D" parent="."]
script = ExtResource("3_ep4f8")
metadata/_custom_type_script = "uid://pisn2tkx8kfu"

[node name="Targeting" type="Node3D" parent="." node_paths=PackedStringArray("pointer", "linePointer")]
script = ExtResource("4_sb34c")
time = 1.6
pointer = NodePath("../Pointer")
linePointer = NodePath("../LinePointer")
waitTimeBeforeEnd = 1.0
metadata/_custom_type_script = "uid://pisn2tkx8kfu"

[node name="SwitchTimer" type="Timer" parent="Targeting"]
one_shot = true

[node name="TargetingTimer" type="Timer" parent="Targeting"]
wait_time = 3.0
one_shot = true

[node name="Shoot" type="Node3D" parent="." node_paths=PackedStringArray("pointer", "linePointer")]
script = ExtResource("5_sb34c")
pointer = NodePath("../Pointer")
linePointer = NodePath("../LinePointer")
waitTimeBeforeEnd = 0.8
metadata/_custom_type_script = "uid://pisn2tkx8kfu"

[node name="Pointer" type="MeshInstance3D" parent="."]
top_level = true
visible = false
cast_shadow = 0
mesh = SubResource("TorusMesh_sb34c")
skeleton = NodePath("")

[node name="LinePointer" parent="." instance=ExtResource("5_a2c7f")]
visible = false

[connection signal="timeout" from="Targeting/SwitchTimer" to="Targeting" method="pickNewMonigote"]
